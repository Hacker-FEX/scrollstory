<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ScrollStory: Preoffset Activation</title>
    <link rel="stylesheet" href="base.css">
</head>

<body>
    <div id="status">Active item index: <span id="activeIndex"></span></div>
    <div id="trigger"></div>
    <div id="container">
        <p class="about">By default, ScrollStory activates the item closest to the trigger offset, indifferent to whether that item is above or below the line. This behavior can be changed.</p>
        <div class="story"><span>1</span></div>
        <div class="story"><span>2</span></div>
        <div class="story"><span>3</span></div>
        <div class="story"><span>4</span></div>
        <div class="story"><span>5</span></div>
        <div class="story"><span>6</span></div>
        <div class="story"><span>7</span></div>
        <div class="story"><span>8</span></div>
        <div class="story"><span>9</span></div>
        <div class="story"><span>10</span></div>
        <div class="story"><span>11</span></div>
        <div class="story"><span>12</span></div>
        <div class="story"><span>13</span></div>
    </div>
    <script src="jquery/jquery.js"></script>
    <script src="jquery-ui/jquery-ui.js"></script>
    <script src="underscore/underscore.js"></script>
    <script src="scrollstory.js"></script>
    <script>
    (function($) {
        // make existing elements 60% of window height
        $('.story').css({
            'height': $(window).height() * 0.6
        });

        // make trigger offset be 20% down the page,
        // instead of the default 0px;
        var triggerOffset = $(window).height() * 0.2;
        $('#trigger').css({top: triggerOffset});
        $('#status').css({top: triggerOffset-($('#status').outerHeight()/2)});

        var $activeIndex = $('#activeIndex');

        $('#container').ScrollStory({
            throttleType: 'throttle',
            triggerOffset: triggerOffset,
            preOffsetActivation: false, // default is true. Setting to false forces an item to pass the trigger point to be activated.
            indexchange: function(ev, data){
                $activeIndex.html(data.item.index);
            }
        });
    })(jQuery);
    </script>
</body>
</html>
